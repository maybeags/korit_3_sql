# 입실 체크 해주세요!! 🍟

sql_class DB에서 Tables에 우클릭 -> create new table
-> enrollment_raw

student_id int
student_name varchar(100)
student_phone varchar(20)
course_id int
course_name varchar(100)
professor_name varchar(100)
professor_phone varchar(20)
classroom varchar(50)
schedule varchar(100)
grade char(2)

| student_id | student_name | student_phone   | course_id | course_name      | professor_name | professor_phone | classroom | schedule         | grade |
|------------|--------------|------------------|-----------|------------------|----------------|------------------|-----------|------------------|--------|
| 1001       | 홍길동       | 010-1234-5678     | 101       | 데이터베이스     | 김교수         | 010-1111-2222     | A-101     | 월 10:00-12:00   | A      |
| 1001       | 홍길동       | 010-1234-5678     | 102       | 운영체제         | 이교수         | 010-3333-4444     | B-202     | 화 13:00-15:00   | B+     |
| 1001       | 홍길동       | 010-1234-5678     | 103       | 네트워크         | 박교수         | 010-5555-6666     | C-303     | 수 10:00-12:00   | A-     |
| 1002       | 이영희       | 010-9999-8888     | 101       | 데이터베이스     | 김교수         | 010-1111-2222     | A-101     | 월 10:00-12:00   | B      |
| 1002       | 이영희       | 010-9999-8888     | 104       | 프로그래밍언어론 | 이교수         | 010-3333-4444     | B-203     | 목 09:00-11:00   | A+     |
| 1003       | 최민수       | 010-7777-2222     | 102       | 운영체제         | 이교수         | 010-3333-4444     | B-202     | 화 13:00-15:00   | C+     |
| 1003       | 최민수       | 010-7777-2222     | 103       | 네트워크         | 박교수         | 010-5555-6666     | C-303     | 수 10:00-12:00   | B+     |
| 1003       | 최민수       | 010-7777-2222     | 104       | 프로그래밍언어론 | 이교수         | 010-3333-4444     | B-203     | 목 09:00-11:00   | A      |
| 1002       | 이영희       | 010-9999-8888     | 103       | 네트워크         | 박교수         | 010-5555-6666     | C-303     | 수 10:00-12:00   | A      |
| 1001       | 홍길동       | 010-1234-5678     | 104       | 프로그래밍언어론 | 이교수         | 010-3333-4444     | B-203     | 목 09:00-11:00   | B      |

---

```sql
SELECT * FROM enrollment_raw;
INSERT INTO enrollment_raw 
	(
		student_id, 
		student_name, 
		student_phone, 
		course_id, course_name, 
		professor_name, professor_phone, 
		classroom, schedule, grade 
	)
VALUES 
	(
		1001,
		'홍길동', '010-1234-5678',
		101, '데이터베이스',
		'김교수', '010-1111-2222',
		'A-101', '월 10:00-12:00', 'A'
	);
```
이상의 쿼리문은 어제 작성한 방식으로, 
insert 테이블명 (컬럼명1, 컬럼명2, ..., 컬럼명n)
values 
  (값1a, 값2a, ..., 값na),
  (값1b, 값2b, ..., 값nb);

와 같은 방식으로 컬럼명을 하나 하나 밝힌 뒤에 그 순서에 맞게 value들을 집어넣어 복수의 row를 한꺼번에 처리했다고 볼 수 있습니다.

그런데 만약에 컬럼명1, ..., 컬럼명n까지가 테이블의 전체 컬럼을 순서대로 밝히는 것이라면

```sql
SELECT * FROM enrollment_raw;
INSERT INTO enrollment_raw 
VALUES 
	(
		1001,
		'홍길동', '010-1234-5678',
		101, '데이터베이스',
		'김교수', '010-1111-2222',
		'A-101', '월 10:00-12:00', 'A'
	);
```
이상과 같이 쓰셔도 동일한 결과를 얻게 됩니다.

```sql
-- 데이터 전체 다 비우고 싶을 때
TRUNCATE TABLE enrollment_raw;
-- 지우고 나서 확인
SELECT * FROM enrollment_raw;
```

데이터 삽입
```sql
INSERT INTO enrollment_raw VALUES
(1001, '홍길동', '010-1234-5678', 101, '데이터베이스', '김교수', '010-1111-2222', 'A-101', '월 10:00-12:00', 'A'),
(1001, '홍길동', '010-1234-5678', 102, '운영체제', '이교수', '010-3333-4444', 'B-202', '화 13:00-15:00', 'B+'),
(1001, '홍길동', '010-1234-5678', 103, '네트워크', '박교수', '010-5555-6666', 'C-303', '수 10:00-12:00', 'A-'),
(1002, '이영희', '010-9999-8888', 101, '데이터베이스', '김교수', '010-1111-2222', 'A-101', '월 10:00-12:00', 'B'),
(1002, '이영희', '010-9999-8888', 104, '프로그래밍언어론', '이교수', '010-3333-4444', 'B-203', '목 09:00-11:00', 'A+'),
(1003, '최민수', '010-7777-2222', 102, '운영체제', '이교수', '010-3333-4444', 'B-202', '화 13:00-15:00', 'C+'),
(1003, '최민수', '010-7777-2222', 103, '네트워크', '박교수', '010-5555-6666', 'C-303', '수 10:00-12:00', 'B+'),
(1003, '최민수', '010-7777-2222', 104, '프로그래밍언어론', '이교수', '010-3333-4444', 'B-203', '목 09:00-11:00', 'A'),
(1002, '이영희', '010-9999-8888', 103, '네트워크', '박교수', '010-5555-6666', 'C-303', '수 10:00-12:00', 'A'),
(1001, '홍길동', '010-1234-5678', 104, '프로그래밍언어론', '이교수', '010-3333-4444', 'B-203', '목 09:00-11:00', 'B');

SELECT * FROM enrollment_raw;
```

1. 데이터 추가 예제
  1. 새로운 학생 한 명이 새로운 과목 수강
  1004, 박정우, 010-1122-3344, 105, 알고리즘, 정교수, 010-6666-7777, D-101, 금 10:00-12:00, B+

  2. 기존 학생이 새로운 과목 수강
  1001, '홍길동', '010-1234-5678', 195, 알고리즘, 정교수, 010-6666-7777, D-101, 금 10:00-12:00, A

  3. 새로운 학생이 기존 과목 수강
  1005, 한예리, 010-8888-9999, 101, 데이터베이스, 김교수, 010-1111-2222, A-101, 월 10:00-12:00, A-

2. 데이터 조회 예제
  1. 홍길동 학생의 수강 목록을 조회하세요.
  2. 네트워크 과목의 수강 학생을 조회하세요.
  3. 성적이 A인 데이터만 조회하세요.
  4. 성적이 A, A+, A-인 데이터만 조회하세요.
  5. 박교수와 김교수의 과목 아이디 / 과목명만 출력하세요

풀이
```sql
-- 데이터 추가 예제
INSERT INTO enrollment_raw VALUES
(1004, '박정우', '010-1122-3344', 105, '알고리즘', '정교수', '010-6666-7777', 'D-101', '금 10:00-12:00', 'B+'),
(1001, '홍길동', '010-1234-5678', 105, '알고리즘', '정교수', '010-6666-7777', 'D-101', '금 10:00-12:00', 'A'),
(1005, '한예리', '010-8888-9999', 101, '데이터베이스', '김교수', '010-1111-2222', 'A-101', '월 10:00-12:00', 'A-');

SELECT * FROM enrollment_raw;

-- 2-1 : 홍길동의 수강 목록
SELECT * 
	FROM enrollment_raw
	WHERE student_name = '홍길동';

SELECT * 
	FROM enrollment_raw
	WHERE student_id = 1001;

SELECT * 
	FROM enrollment_raw
	WHERE student_phone = '010-1234-5678';


-- 2-2 : 네트워크 과목의 수강 학생 목록 조회

SELECT * 
	FROM enrollment_raw
	WHERE course_name = '네트워크';

SELECT student_id, student_name 
	FROM enrollment_raw
	WHERE course_name = '네트워크';

SELECT * 
	FROM enrollment_raw
	WHERE course_id = 103;

-- 2-3 : 성적이 A인 데이터만 조회
SELECT * 
	FROM enrollment_raw
	WHERE grade = 'A';

-- 2-4 : 성적이 A / A- / A+인 데이터 조회
-- 2-4-1 : OR를 사용하는 방법
SELECT * 
	FROM enrollment_raw
	WHERE grade = 'A' OR grade = 'A-' OR grade = 'A+';

-- 2-4-2 : IN를 사용하는 방법
SELECT * 
	FROM enrollment_raw
	WHERE grade IN ('A', 'A-', 'A+');

-- 2-5 : 김교수 혹은 박교수의 과목 아이디 / 과목명
SELECT course_id, course_name
	FROM enrollment_raw
	WHERE professor_name IN ('김교수', '박교수');
```


3. 데이터 수정 예제

## 데이터 수정

### UPDATE 테이블명 SET 컬럼명 = '바꿀데이터' WHERE 컬럼명 = 데이터값

예를 들어서, 홍길동의 이름을 여러분이름으로 바꾼다고 가정해보겠습니다.

UPDATE enrollment_raw SET student_name = '여러분이름' WHERE student_id = 1001;

  1. 여러분이름의 데이터베이스 과목의 수강 성적 변경 -> A+
  2. 최민수 학생의 전화번호 변경  -> 010-0000-111
  3. 박교수의 강의실 변경 -> C-404

  - 그리고 UPDATE 수행 후에 적절하게 확인할 수 있도록 SELECT문을 꼭 포함시켜 주세요.
  - 이상의 3. 문제들은 전부 답이 여러 개 있을 수 있습니다. 여러분이 작성하신 답을 삭제하지 마세요.

  3-1.
  ```sql
  UPDATE enrollment_raw SET grade='A+' WHERE course_name = '데이터베이스';
  UPDATE enrollment_raw SET grade='A+' WHERE course_id = 101;

  SELECT grade FROM enrollment_raw WHERE student_name = '여러분이름' AND course_id = 101;
  ```

3 전체 풀이 및 조회
```sql
-- 3-1 풀이
UPDATE enrollment_raw SET grade='A+' WHERE course_name = '데이터베이스';
UPDATE enrollment_raw SET grade='A+' WHERE course_id = 101;

-- 3-1 조회
SELECT grade FROM enrollment_raw WHERE student_name = '여러분이름' AND course_id = 101;

-- 3-2 최민수 학생의 전화번호가 010-0000-1111
UPDATE enrollment_raw 
	SET student_phone = '010-0000-1111'
	WHERE student_name = '최민수';

-- 3-2 조회
SELECT student_phone
	FROM enrollment_raw
	WHERE student_name = '최민수'
	LIMIT 1;

-- 3-3 박교수의 강의실 변경 -> C-404
UPDATE enrollment_raw
	SET classroom = 'C-404'
	WHERE professor_name = '박교수';

-- 3-3 조회
SELECT classroom
	FROM enrollment_raw
	WHERE course_name = '네트워크'
	LIMIT 1;
```

## 데이터 삭제
### DELETE FROM 테이블명 WHERE 조건1, 조건2, 조건3


삭제하기 위한 사전 데이터 마련
```sql
INSERT INTO enrollment_raw VALUES
(
	1010, '김십', '010-9876-5432', 
	201, '영어교육과', 'James', '010-1597-3579', 
	'Z-102', '월 09:00-18:00' ,'F'
),
( 
	1011, '김십일', '051-5690-1234',
	302, '국어국문학과', 'Andy', '02-3333-4444',
	'X-404', '수 09:30-12:30', 'D+'
);

SELECT * FROM enrollment_raw;
-- 영어교육과를 통사론 으로 고치세요
-- 국어국문학과를 열린사고와말하기 로 고치세요. - 조회도 해주세요.
-- 열린사고와말하기 과목의 교수 이름을 지피티 로 고치세요. - 조회도 해주세요

UPDATE enrollment_raw
	SET course_name = '통사론'
	WHERE course_name = '영어교육과';

SELECT course_name
	FROM enrollment_raw
	WHERE course_name = '통사론';

UPDATE enrollment_raw
	SET course_name = '열린사고와말하기'
	WHERE course_id = 302;

SELECT course_name
	FROM enrollment_raw
	WHERE course_id = 302;

UPDATE enrollment_raw
	SET professor_name = '지피티'
	WHERE course_name = '열린사고와말하기';

SELECT professor_name
	FROM enrollment_raw
	WHERE course_name = '열린사고와말하기';
```
주의 사항 -> DBeaver에 얘네를 붙여넣는다고 하더라도 여러분이 쿼리문을 실행시키지않으면
DB 내의 Table이 최신화되지 않기 때문에 직접 바뀌는 부분을 확인하셔야 합니다 -> 제가 github에 예전만큼
push를 자주하지 않는 이유

```sql
-- 여러분이름의 프로그래밍언어론 과목의 row를 삭제
DELETE FROM enrollment_raw
	WHERE student_name = '여러분이름' AND course_name = '프로그래밍언어론';

-- 위에 쿼리문 실행시키고나서 사라졌는지 확인하기 위한 조회 쿼리문
SELECT * FROM enrollment_raw er;
```

  1. 여러분이름이 수강한 알고리즘 과목 삭제
  2. 성적이 C+ 이하인 데이터 삭제(응용이 필요하겠습니다)
  3. 교수명이 정교수인 강의 전체 삭제

    - 삭제하고나서 알맞는 조회문도 작성해주세요.


## 응용 고급 실습

1. 여러분이름이 수강한 과목 중에 성적이 A 이상인 과목 조회
2. 강의실이 B-203인 모든 과목을 성적 내림차순으로 정렬(ORDER BY)
3. 상위 3 개의 성적만 조회(LIMIT)

4. 학생 ID가 1002번인 학생의 이름과 전화번호를 수정
  - 이름 강이 / 전화번호 010-2345-8765

5. 여러분이름이 수강한 과목 중에 강의실이 B-203인 row만 삭제

```sql
-- 1. 여러분이름이 수강한 과목 중에 성적이 A 이상인 과목 조회
SELECT course_name
	FROM enrollment_raw
	WHERE student_name = '여러분이름' AND grade IN ('A', 'A+');

-- 2. 강의실이 B-203인 모든 과목을 성적 내림차순으로 정렬(ORDER BY)
SELECT course_id, course_name, grade
	FROM enrollment_raw
	WHERE classroom = 'B-203'
	ORDER BY grade DESC;

-- 3. 상위 3 개의 성적만 조회(LIMIT)
SELECT grade
	FROM enrollment_raw
	WHERE grade = 'A+'
	LIMIT 3;

-- 4. 학생 ID가 1002번인 학생의 이름과 전화번호를 수정
--   - 이름 강이 / 전화번호 010-2345-8765
UPDATE enrollment_raw
	SET student_name = '강이', student_phone = '010-2345-8765'
	WHERE student_id = 1002;

SELECT student_id, student_name, student_phone
	FROM enrollment_raw
	WHERE student_id = 1002;


-- 5. 여러분이름이 수강한 과목 중에 강의실이 B-203인 row만 삭제
DELETE FROM enrollment_raw
	WHERE student_name = '여러분이름' AND classroom = 'B-203';

SELECT student_name, classroom
	FROM enrollment_raw
	WHERE student_name = '여러분이름';
```